applications:
    app:
        type: "php:8.2"
        web:
            locations:
                "/":
                    root: "public"
                    passthru: "/index.php"
        build:
            flavor: none

        dependencies:
            php:
                composer/composer: "^2"
        runtime:
            extensions:
                - mbstring
                - pdo
                - pdo_mysql
                - intl
                - opcache
        relationships:
            database: "mysql:mysql"

        stack: composer install --no-dev --optimize-autoloader
            php bin/console cache:clear --env=prod --no-warmup
            php bin/console cache:warmup --env=prod
        mounts:
            "/var":
                source: storage
                source_path: files
            "/vendor":
                source: storage
                source_path: files
        variables:
            php:
                display_errors: "Off"
            env:
                APP_ENV: prod
                APP_DEBUG: 0

services: {}

routes:
    "https://{default}/":
        type: upstream
        upstream: "app:http"
