applications:
    app:
        type: "php:8.4"

        web:
            locations:
                "/":
                    root: "public"
                    passthru: "/index.php"

        runtime:
            extensions:
                - mbstring
                - pdo
                - pdo_mysql
                - intl
                - opcache

        mounts:
            "/var":
                source: storage
                source_path: var
            "/vendor":
                source: storage
                source_path: vendor

        relationships:
            database: "mysql:mysql"

        variables:
            env:
                APP_ENV: "prod"
                APP_DEBUG: "0"
                # IMPORTANT : Doctrine utilisera AUTOMATIQUEMENT DATABASE_URL générée par Upsun
                # Ne mets PAS DATABASE_URL ici.

services:
    mysql:
        # La dernière version stable MySQL chez Upsun est 8.0
        type: "mysql:8.0"

routes:
    "https://{default}/":
        type: upstream
        upstream: "app:http"
